---
# Source: ingress-headers/templates/ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  annotations:
    nginx.ingress.kubernetes.io/configuration-snippet: |-
      add_header X-Permitted-Cross-Domain-Policies "none";
      add_header Example-String "foo";
      add_header Example-List "bar baz";
      add_header Content-Security-Policy "connectSrc 'self' *.privacy-service.org *.trust-service.com https://*.analytics-service.net/ https://*.service.com https://*.feedback-service.com https://edge.analytics-cloud.net/ https://company.personalization-service.net/ https://metrics.company.com/; defaultSrc 'self' 'unsafe-inline' *.company.com *.service.com; fontSrc 'self' *.feedback-service.com data: https://*.company.com; frameAncestors 'self'; frameSrc 'self' *.trust-service.com https://*.feedback-service.com https://company.analytics-service.net/ https://www.search-engine.com/recaptcha/ https://www.video-platform.com/; imgSrc 'self' 'unsafe-inline' *.privacy-service.org *.trust-service.com data: https://*.service.com https://*.feedback-service.com https://ad.analytics-provider.net/ddm/activity/ https://adservice.search-engine.com https://metrics.company.com; reportTo 'csp-endpoint'; reportUri https://some.example.com/gateway/api-gateway/api/gateway/csp-reporting; scriptSrc 'self' 'unsafe-eval' 'unsafe-inline' *.privacy-service.org *.trust-service.com https://*.analytics-service.net/ https://*.company.com https://*.feedback-service.com https://assets.tag-manager.com/ https://cdn.personalization-service.net/company.js https://edge.analytics-cloud.net/ https://company.personalization-service.net/ https://www.search-engine.com/recaptcha/ https://www.static-content.com/recaptcha/; styleSrc 'self' 'unsafe-inline' https://*.company.com https://*.feedback-service.com";
      add_header Feature-Policy "camera 'none'; encrypted-media 'none'; geolocation 'none'; microphone 'none'; payment 'none'; speaker 'none'; usb 'none'";
      add_header Referrer-Policy "no-referrer";
      add_header X-Content-Type-Options "nosniff";
      add_header X-DNS-Prefetch-Control "off";
      add_header X-Download-Options "noopen";
      add_header X-Frame-Options "deny";
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
    nginx.ingress.kubernetes.io/proxy-connect-timeout: "60"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "60"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/use-regex: "true"
  labels: 
    description: vitiate
    chart: ingress-headers-ingress
  name: "vitiate"
spec:
  rules:
    - host: app.example.com
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: example-service
                port:
                  number: 80
